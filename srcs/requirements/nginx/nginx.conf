events {
	worker_connections 1024;
}

http {
	include /etc/nginx/mime.types;
	server {
	    #SSL STUFF
		listen					443 ssl; #ssl only on port 443
		ssl_protocols 			TLSv1.2 TLSv1.3; #specifing the TSL version
		ssl_certificate 		/etc/ssl/certs/nginx.crt; #providing my self signed certificate
		ssl_certificate_key 	/etc/ssl/private/nginx.key; #providing my key derived from the certificate

		server_name				localhost; #my server name
		root					/var/www/wordpress; #where is the root og my server
        index                   index.php;  #what is the index file of my server

		location / { #trying to handle 404 error
			try_files		    $uri $uri/ =404;
		}

		location ~ \.php$ { #tying to handle php outside this containers
			include				fastcgi_params;
		    fastcgi_pass        wordpress:9000; #redirect php request to port 9000
		}
	}
}